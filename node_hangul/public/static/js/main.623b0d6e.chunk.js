(this["webpackJsonpmy-components"]=this["webpackJsonpmy-components"]||[]).push([[0],{115:function(e,t){},138:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(12),c=a.n(o),i=(a(85),a(15)),l=a.n(i),s=a(8),u=a(22),m=a(68),d=a(32),f=a(69),h=a(70),p=a(74),g=a(162),x=a(164),v=a(71),E=a.n(v),b=a(160);function y(e){var t=e.gap,a=e.text;return r.a.createElement(g.a,{display:"flex",alignItems:"center",justifyContent:"center",mx:t,mt:t,height:"10vh",fontSize:"h3.fontSize",bgcolor:b.a[900]},a)}function C(e){var t=e.gap,a=e.title;return r.a.createElement(g.a,{textAlign:"center",bgcolor:b.a[700],m:t},a)}var k=r.a.memo((function(e){var t=e.gap,a=e.master,n=a.lastIndexedCount?a.lastIndexedCount:0,o=a.searching,c=void 0===o?0:o;return r.a.createElement(g.a,{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",height:"20vh",mx:t,mb:t,fontSize:"fontSize",bgcolor:b.a[700]},r.a.createElement(g.a,{display:"flex",justifyContent:"flex-start",flexDirection:"column",m:2,textAlign:"left"},r.a.createElement("div",null,"PID: ",a.pid),r.a.createElement("div",null,"MEM: ",a.mem),r.a.createElement("p",null),r.a.createElement("div",null,"TOTAL INDEXED : ",n.toLocaleString()),r.a.createElement("div",null,"LAST INDEXED DATE: ",a.lastIndexedDate)),r.a.createElement(g.a,null,r.a.createElement("div",{style:{fontSize:"12px"}},"Searching"),r.a.createElement("div",{style:{fontSize:"60px"}},c)))})),w=a(163);var S=r.a.memo((function(e){var t=e.gap,a=e.currentLog;console.log("rerendering Log : ",a);var n=function(e){var t=e.cacheHit,a=e.children;return r.a.createElement(g.a,{color:t&&"cyan"},a)},o={flexGrow:1,flexShrink:5,margin:"3px",minWidth:"120px",flexBasis:"120px"};return r.a.createElement(g.a,{display:"flex",flexDirection:"row",justifyContent:"flex-start",alignItems:"stretch",flexGrow:3,mx:t,overflow:"auto",textOverflow:"ellipsis",fontSize:"12px",bgcolor:b.a[700]},r.a.createElement(g.a,{style:Object(s.a)({},o,{minWidth:"120px"})},a.map((function(e){return r.a.createElement(n,{cacheHit:e.cacheHit},e.eventTime)}))),r.a.createElement(g.a,{style:Object(s.a)({},o,{flexBasis:"80",minWidth:"60px"})},a.map((function(e){return r.a.createElement(n,{cacheHit:e.cacheHit},e.userId)}))),r.a.createElement(g.a,{style:Object(s.a)({},o,{flexBasis:"80",minWidth:"60px"})},a.map((function(e){return r.a.createElement(n,{cacheHit:e.cacheHit},e.ip.replace("::ffff:",""))}))),r.a.createElement(g.a,{style:Object(s.a)({},o,{flexBasis:"80",minWidth:"60px"})},a.map((function(e){return r.a.createElement(n,{cacheHit:e.cacheHit},e.elapsed,"\ucd08")}))),r.a.createElement(g.a,{style:Object(s.a)({},o,{flexBasis:"80",minWidth:"60px"})},a.map((function(e){return r.a.createElement(n,{cacheHit:e.cacheHit},e.resultCount,"\uac74")}))),r.a.createElement(g.a,{style:Object(s.a)({},o,{flexGrow:5,flexShrink:1,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"})},a.map((function(e){return r.a.createElement(n,{cacheHit:e.cacheHit},e.keyword)}))))}));var j=r.a.memo((function(e){var t=e.gap,a=e.workers,n="".concat(12-a.length/3,"px"),o="".concat(15-a.length/3,"px"),c="".concat(25-a.length/3,"px");return r.a.createElement(g.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",flexWrap:"wrap",flexGrow:"1",mx:t,overflow:"hidden",bgcolor:b.a[700]},a.map((function(e){return r.a.createElement(g.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",m:1,fontSize:o,bgcolor:b.a[600]},r.a.createElement(g.a,{display:"flex",overflow:"auto",justifyContent:"flex-start",flexDirection:"column",textAlign:"left",p:2},r.a.createElement("div",null,"PID: ",e.pid),r.a.createElement("div",null,"WORDS: ",e.words.toLocaleString()),r.a.createElement("p",null),r.a.createElement(g.a,{textAlign:"center",style:{fontSize:n}},"MEM"),r.a.createElement("div",{style:{fontSize:c}},e.mem)))})))}));var D=r.a.memo((function(e){var t=e.gap,a=e.caches,n="".concat(10-a.length/3,"px"),o="".concat(13-a.length/3,"px"),c="".concat(22-a.length/3,"px");return r.a.createElement(g.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",flexWrap:"wrap",height:"20vh",mx:t,bgcolor:b.a[700],overflow:"hidden"},a.map((function(e){return r.a.createElement(g.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",m:1,fontSize:o,bgcolor:b.a[600]},r.a.createElement(g.a,{display:"flex",overflow:"auto",justifyContent:"flex-start",flexDirection:"column",p:2,textAlign:"left"},r.a.createElement("div",null,"PID: ",e.pid),r.a.createElement("div",null,"COUNT: ",e.cacheCount),r.a.createElement("div",null,"CACHE HIT: ",e.cacheHit),r.a.createElement(g.a,{textAlign:"center",style:{fontSize:n}},"MEM"),r.a.createElement("div",{style:{fontSize:c}},e.mem)))})))})),I={SOCKET_NAMESPACE:"/",urls:{load:"/loadSong/useWorkers",loadFromDB:"/loadSong/useWorkers?from=db",clear:"/clearSong",clearCache:"/clearCache"}},O=a(141),W=a(165),M=Object(O.a)({root:{color:"#52af77",height:"5px",padding:0},thumb:{display:"none"},active:{},valueLabel:{left:"calc(-50% + 4px)"},track:{height:5,borderRadius:0},rail:{height:5,borderRadius:0}})(W.a),L=function(e){var t=e.value,a=e.onChange;return r.a.createElement(M,{value:t,onChange:a,valueLabelDisplay:"auto"})},z=a(13),H=a(73),A=a.n(H),B={get:function(e){return Object(u.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=I.urls[e]){t.next=4;break}return t.abrupt("return",Promise.resolve({success:!1,msg:"not valid type : ".concat(e)}));case 4:return t.next=6,A.a.get(a);case 6:if(200!==(n=t.sent).status){t.next=10;break}return console.log(n.data),t.abrupt("return",n.data);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()}},N=(a(138),Object(z.a)({root:{backgroundColor:b.a[800],"&:hover":{backgroundColor:b.a[500]},"&:active":{backgroundColor:b.a[300]}}})(x.a)),T=function(e){function t(){var e;return Object(m.a)(this,t),(e=Object(f.a)(this,Object(h.a)(t).call(this))).onClickLoad=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState(Object(s.a)({},e.state,{onIndexing:!0})),t.next=3,B.get("load");case 3:a=t.sent,console.log(a);case 5:case"end":return t.stop()}}),t)}))),e.onClickLoadFromDB=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState(Object(s.a)({},e.state,{onIndexing:!0})),t.next=3,B.get("loadFromDB");case 3:a=t.sent,console.log(a);case 5:case"end":return t.stop()}}),t)}))),e.onClickClear=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B.get("clear");case 2:a=t.sent,e.setState(Object(s.a)({},e.state,{indexDone:!1})),console.log(a);case 5:case"end":return t.stop()}}),t)}))),e.state={master:{},workers:[],cacheWorkers:[],currentLog:[],progress:0,onIndexing:!1,indexDone:!0},e}return Object(p.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=I.SOCKET_NAMESPACE.endpoint,t=E()(e);t.on("connect",(function(){console.log("socket connected")})),t.on("masterMonitor",this.updateMasterMonitor.bind(this)),t.on("workerMonitor",this.updateWorkerMonitor.bind(this)),t.on("cacheWorkerMonitor",this.updateCacheWorkerMonitor.bind(this)),t.on("logMonitor",this.updateLogMonitor.bind(this)),t.on("progress",this.updateProgress.bind(this)),t.on("error",this.resetState.bind(this)),t.on("disconnect",this.resetState.bind(this)),t.on("connect_error",this.resetState.bind(this))}},{key:"updateMasterMonitor",value:function(e){console.log("update master:",e);var t=e.indexingStatus,a="INDEXING"===t,n="INDEX_DONE"===t;this.setState(Object(s.a)({},this.state,{master:e,onIndexing:a,indexDone:n}))}},{key:"updateWorkerMonitor",value:function(e){this.setState(Object(s.a)({},this.state,{workers:e}))}},{key:"updateCacheWorkerMonitor",value:function(e){this.setState(Object(s.a)({},this.state,{cacheWorkers:e}))}},{key:"updateLogMonitor",value:function(e){console.log("update log:",e),this.setState(Object(s.a)({},this.state,{currentLog:e}))}},{key:"updateProgress",value:function(e){var t=e>99.9;console.log("update progress: ",e,t),this.setState(Object(s.a)({},this.state,{progress:e,disalbeClearIndexBtn:!t,disalbeClearCacheBtn:!t,onIndexing:!t}))}},{key:"resetState",value:function(){this.setState({master:{},workers:[],currentLog:[],cacheWorkers:[]})}},{key:"onClickCacheClear",value:function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.get("clearCache");case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"handleSliderChange",value:function(){console.log("changed")}},{key:"render",value:function(){var e=this.state,t=e.workers,a=e.master,n=e.currentLog,o=e.cacheWorkers,c=e.progress,i=this.state,l=i.onIndexing,s=i.indexDone,u=l||s,m=l||s,d=l||!s,f=l||!s;return r.a.createElement(g.a,{display:"flex",flexDirection:"column",height:"100vh",className:"App"},r.a.createElement(y,{gap:.3,text:"Status"}),r.a.createElement(g.a,{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"stretch",height:"80vh"},r.a.createElement(g.a,{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",flexGrow:"1",width:"45vw"},r.a.createElement(C,{gap:.3,title:"master"}),r.a.createElement(k,{gap:.3,master:a}),r.a.createElement(S,{gap:.3,currentLog:n})),r.a.createElement(g.a,{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"stretch",flexGrow:"1",width:"45vw"},r.a.createElement(C,{gap:.3,title:"cache"}),r.a.createElement(D,{gap:.3,caches:o}),r.a.createElement(C,{gap:.3,title:"worker"}),r.a.createElement(j,{gap:.3,workers:t}))),r.a.createElement(L,{value:c,onChange:this.handleSliderChange,"aria-labelledby":"continuous-slider"}),r.a.createElement(g.a,{display:"flex",flexDirection:"row",justifyContent:"space-around",alignItems:"center",flexGrow:"1",mx:.3,mb:.3,bgcolor:b.a[900]},r.a.createElement(w.a,{open:u,title:l?"Wait indexing...":"Clear Index first!",placement:"right-end"},r.a.createElement(N,{disabled:u,onClick:this.onClickLoadFromDB,variant:"contained",color:"primary",size:"medium"},"load from DB")),r.a.createElement(w.a,{open:m,title:l?"Wait indexing...":"Clear Index first!",placement:"right-end"},r.a.createElement(N,{disabled:m,onClick:this.onClickLoad,variant:"contained",color:"primary",size:"medium"},"load from file")),r.a.createElement(w.a,{open:l,title:"Wait indexing...",placement:"right-end"},r.a.createElement(N,{disabled:d,onClick:this.onClickClear,variant:"contained",color:"primary",size:"medium"},"clear index")),r.a.createElement(N,{disabled:f,onClick:this.onClickCacheClear,variant:"contained",color:"primary",size:"medium"},"clear cache")))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(T,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},80:function(e,t,a){e.exports=a(139)},85:function(e,t,a){}},[[80,1,2]]]);
//# sourceMappingURL=main.623b0d6e.chunk.js.map